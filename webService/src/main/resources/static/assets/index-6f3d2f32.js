var re=Object.defineProperty;var oe=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function p(){}function Z(e){return e()}function W(){return Object.create(null)}function C(e){e.forEach(Z)}function ee(e){return typeof e=="function"}function I(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ie(e){return Object.keys(e).length===0}function _(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function se(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function k(){return b(" ")}function ue(){return b("")}function fe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function le(e){return function(t){return t.preventDefault(),e.call(this,t)}}function P(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ce(e){return Array.from(e.childNodes)}function H(e,t){t=""+t,e.data!==t&&(e.data=t)}let N;function O(e){N=e}function ae(){if(!N)throw new Error("Function called outside component initialization");return N}function te(e){ae().$$.on_mount.push(e)}const v=[],R=[];let x=[];const z=[],de=Promise.resolve();let q=!1;function he(){q||(q=!0,de.then(ne))}function G(e){x.push(e)}function pe(e){z.push(e)}const F=new Set;let w=0;function ne(){if(w!==0)return;const e=N;do{try{for(;w<v.length;){const t=v[w];w++,O(t),me(t.$$)}}catch(t){throw v.length=0,w=0,t}for(O(null),v.length=0,w=0;R.length;)R.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];F.has(n)||(F.add(n),n())}x.length=0}while(v.length);for(;z.length;)z.pop()();q=!1,F.clear(),O(e)}function me(e){if(e.fragment!==null){e.update(),C(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}function _e(e){const t=[],n=[];x.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),x=t}const j=new Set;let y;function $e(){y={r:0,c:[],p:y}}function ge(){y.r||C(y.c),y=y.p}function E(e,t){e&&e.i&&(j.delete(e),e.i(t))}function A(e,t,n,r){if(e&&e.o){if(j.has(e))return;j.add(e),y.c.push(()=>{j.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function J(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ye(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function K(e){e&&e.c()}function S(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),G(()=>{const o=e.$$.on_mount.map(Z).filter(ee);e.$$.on_destroy?e.$$.on_destroy.push(...o):C(o),e.$$.on_mount=[]}),i.forEach(G)}function D(e,t){const n=e.$$;n.fragment!==null&&(_e(n.after_update),C(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){e.$$.dirty[0]===-1&&(v.push(e),he(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function B(e,t,n,r,i,o,s=null,f=[-1]){const u=N;O(e);const l=e.$$={fragment:null,ctx:[],props:o,update:p,not_equal:i,bound:W(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:W(),dirty:f,skip_bound:!1,root:t.target||u.$$.root};s&&s(l.root);let d=!1;if(l.ctx=n?n(e,t.props||{},(c,L,...a)=>{const g=a.length?a[0]:L;return l.ctx&&i(l.ctx[c],l.ctx[c]=g)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](g),d&&be(e,c)),L}):[],l.update(),d=!0,C(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const c=ce(t.target);l.fragment&&l.fragment.l(c),c.forEach(h)}else l.fragment&&l.fragment.c();t.intro&&E(e.$$.fragment),S(e,t.target,t.anchor),ne()}O(u)}class M{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){D(this,1),this.$destroy=p}$on(t,n){if(!ee(n))return p;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const we="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(we);function Q(e,t,n){const r=e.slice();return r[1]=t[n],r}function X(e){let t,n,r=e[1]+"",i,o,s,f=e[0][e[1]]+"",u,l;return{c(){t=$("tr"),n=$("td"),i=b(r),o=k(),s=$("td"),u=b(f),l=k()},m(d,c){m(d,t,c),_(t,n),_(n,i),_(t,o),_(t,s),_(s,u),_(t,l)},p(d,c){c&1&&r!==(r=d[1]+"")&&H(i,r),c&1&&f!==(f=d[0][d[1]]+"")&&H(u,f)},d(d){d&&h(t)}}}function ve(e){let t,n,r,i=J(Object.keys(e[0])),o=[];for(let s=0;s<i.length;s+=1)o[s]=X(Q(e,i,s));return{c(){t=$("table"),n=$("tr"),n.innerHTML='<th style="min-width: 200px">Asset</th> <th>Balance</th>',r=k();for(let s=0;s<o.length;s+=1)o[s].c()},m(s,f){m(s,t,f),_(t,n),_(t,r);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(s,[f]){if(f&1){i=J(Object.keys(s[0]));let u;for(u=0;u<i.length;u+=1){const l=Q(s,i,u);o[u]?o[u].p(l,f):(o[u]=X(l),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},i:p,o:p,d(s){s&&h(t),se(o,s)}}}function xe(e,t,n){let r={};return te(()=>{fetch("balances/list").then(i=>i.json()).then(i=>n(0,r=i))}),[r]}class Ee extends M{constructor(t){super(),B(this,t,xe,ve,I,{})}}function Y(e){let t,n=e[0].name+"",r,i,o;return{c(){t=b("Hello, "),r=b(n),i=b(". "),o=$("a"),o.textContent="Logout",P(o,"href","/system/logout")},m(s,f){m(s,t,f),m(s,r,f),m(s,i,f),m(s,o,f)},p(s,f){f&1&&n!==(n=s[0].name+"")&&H(r,n)},d(s){s&&(h(t),h(r),h(i),h(o))}}}function Le(e){let t,n=e[0]!=null&&Y(e);return{c(){n&&n.c(),t=ue()},m(r,i){n&&n.m(r,i),m(r,t,i)},p(r,[i]){r[0]!=null?n?n.p(r,i):(n=Y(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:p,o:p,d(r){r&&h(t),n&&n.d(r)}}}async function Oe(){try{const e=await fetch("system/whoami");if(!e.ok)throw new Error(`Error! status: ${e.status}`);return await e.json()}catch(e){return e instanceof Error?(console.log("error message: ",e.message),null):(console.log("unexpected error: ",e),null)}}function Ae(e,t,n){let{user:r=null}=t;return te(async()=>{n(0,r=await Oe())}),e.$$set=i=>{"user"in i&&n(0,r=i.user)},[r]}class ke extends M{constructor(t){super(),B(this,t,Ae,Le,I,{user:0})}}function Ne(e){let t,n,r;return{c(){t=$("form"),t.innerHTML=`Asset: <input type="text" name="assetCode"/> <br/>
    Amount: <input type="text" name="amount"/> <br/> <input type="submit" value="Deposit"/>`,P(t,"method","post"),P(t,"action","/balances/deposit")},m(i,o){m(i,t,o),n||(r=fe(t,"submit",le(e[0])),n=!0)},p,i:p,o:p,d(i){i&&h(t),n=!1,r()}}}function Ce(e){return[n=>{const r=n.target.action,i=new FormData(n.target),o=new URLSearchParams;for(let s of i){const[f,u]=s;o.append(f,u)}n.target.method.toLowerCase()==="get"?fetch(`${r}?${o}`):fetch(r,{method:"POST",body:o})}]}class je extends M{constructor(t){super(),B(this,t,Ce,Ne,I,{})}}function Pe(e){let t;return{c(){t=$("a"),t.textContent="Login with Google",P(t,"href","/oauth2/authorization/google")},m(n,r){m(n,t,r)},i:p,o:p,d(n){n&&h(t)}}}function Se(e){let t,n,r,i;return t=new Ee({}),r=new je({}),{c(){K(t.$$.fragment),n=k(),K(r.$$.fragment)},m(o,s){S(t,o,s),m(o,n,s),S(r,o,s),i=!0},i(o){i||(E(t.$$.fragment,o),E(r.$$.fragment,o),i=!0)},o(o){A(t.$$.fragment,o),A(r.$$.fragment,o),i=!1},d(o){o&&h(n),D(t,o),D(r,o)}}}function De(e){let t,n,r,i,o,s,f;function u(a){e[1](a)}let l={};e[0]!==void 0&&(l.user=e[0]),n=new ke({props:l}),R.push(()=>ye(n,"user",u));const d=[Se,Pe],c=[];function L(a,g){return a[0]!=null?0:1}return o=L(e),s=c[o]=d[o](e),{c(){t=$("main"),K(n.$$.fragment),i=k(),s.c()},m(a,g){m(a,t,g),S(n,t,null),_(t,i),c[o].m(t,null),f=!0},p(a,[g]){const V={};!r&&g&1&&(r=!0,V.user=a[0],pe(()=>r=!1)),n.$set(V);let T=o;o=L(a),o!==T&&($e(),A(c[T],1,1,()=>{c[T]=null}),ge(),s=c[o],s||(s=c[o]=d[o](a),s.c()),E(s,1),s.m(t,null))},i(a){f||(E(n.$$.fragment,a),E(s),f=!0)},o(a){A(n.$$.fragment,a),A(s),f=!1},d(a){a&&h(t),D(n),c[o].d()}}}function Ie(e,t,n){let r;function i(o){r=o,n(0,r)}return[r,i]}class Be extends M{constructor(t){super(),B(this,t,Ie,De,I,{})}}new Be({target:document.getElementById("app")});
